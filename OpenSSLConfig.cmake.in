unset(OPENSSL_INCLUDE_DIRS)
unset(OPENSSL_INCLUDE_DIR)
unset(OPENSSL_LIBRARIES)

find_path(OPENSSL_INCLUDE_DIR openssl/ssl.h)
find_path(OPENSSL_INCLUDE_DIRS openssl/ssl.h)

set(LIBS ssl crypto)
foreach(name ${LIBS})
	string(TOUPPER ${name} uname)
	find_library(${uname}_LIBRARY ${name})
	find_library(${uname}_LIBRARY_D ${name}_d)
	if(${uname}_LIBRARY AND ${uname}_LIBRARY_D)
		list(APPEND OPENSSL_LIBRARIES debug ${${uname}_LIBRARY_D} optimized ${${uname}_LIBRARY})
	else()
		if(${uname}_LIBRARY_D)
			if(WIN32)
				list(APPEND OPENSSL_LIBRARIES debug ${${uname}_LIBRARY_D})
			else()
				list(APPEND OPENSSL_LIBRARIES general ${${uname}_LIBRARY_D})
			endif()
		else()
			if(WIN32)
				list(APPEND OPENSSL_LIBRARIES optimized ${${uname}_LIBRARY})
			else()
				list(APPEND OPENSSL_LIBRARIES general ${${uname}_LIBRARY})
			endif()
		endif()
	endif()
endforeach()


include(FindPackageHandleStandardArgs)
find_package_handle_standard_args(OPENSSL
                                  REQUIRED_VARS OPENSSL_LIBRARIES OPENSSL_INCLUDE_DIR)
mark_as_advanced(OPENSSL_INCLUDE_DIR OPENSSL_LIBRARIES)
